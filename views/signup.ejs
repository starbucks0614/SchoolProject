<% extend('./layouts/default')%>
<div class="container mt-2 mb-2">
  <div id="sign_up">
    <div class="form-group">
      <label for="inputAccount">名稱</label>
      <input type="text" class="form-control" id="inputName" v-model="name" aria-describedby="emailHelp">
    </div>
    <div class="form-group">
      <label for="inputAccount">帳號</label>
      <input type="text" class="form-control" id="inputAccount" v-model="account" aria-describedby="emailHelp">
    </div>
    <div class="form-group">
      <label for="inputPassword">密碼</label>
      <input type="password" class="form-control" id="inputPassword" v-model="password">
    </div>
    <button type="submit" class="btn btn-primary" @click="singupButtonClicked">註冊</button>
  </div>
</div>

<script>
  new Vue({
    el: '#sign_up',
    created(){

    },
    data: {
      name: '',
      account: '',
      password: ''
    },
    methods: {
      singupButtonClicked(){
        // id, name, account, password, is_admin, status, 
        let vm = this;
        let data = {
          name: vm.name,
          account: vm.account,
          password: vm.password,
        }
        axios.post('/signup', data)
        .then(function(res){
          if(res.data.success){
            vm.$message({
              message: '註冊成功！',
              type: 'success'
            });
          }
          else{
            vm.$message.error(`註冊失敗，${res.data.message}`);
          }
        })
        .catch(function(res){
          vm.$message.error(`與伺服器連線中斷。`);
        })
      }
    },
    computed: {

    }
  })
</script>